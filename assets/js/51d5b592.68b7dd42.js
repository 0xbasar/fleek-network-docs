"use strict";(self.webpackChunkdocta=self.webpackChunkdocta||[]).push([[1984],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function r(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,s=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),c=p(n),h=o,m=c["".concat(s,".").concat(h)]||c[h]||d[h]||i;return n?a.createElement(m,l(l({ref:t},u),{},{components:n})):a.createElement(m,l({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,l=new Array(i);l[0]=h;var r={};for(var s in t)hasOwnProperty.call(t,s)&&(r[s]=t[s]);r.originalType=e,r[c]="string"==typeof e?e:o,l[1]=r;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},2915:(e,t,n)=>{n.d(t,{ZP:()=>l});var a=n(7462),o=(n(7294),n(3905));const i={toc:[]};function l(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},i,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You have several ways of doing this:"),(0,o.kt)("ul",{parentName:"admonition"},(0,o.kt)("li",{parentName:"ul"},"Clone via HTTPS"),(0,o.kt)("li",{parentName:"ul"},"Clone via SSH"),(0,o.kt)("li",{parentName:"ul"},"Download via Github CLI"),(0,o.kt)("li",{parentName:"ul"},"Download the ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/fleek-network/lightning/archive/refs/heads/main.zip"},"zip package")," from the repository")),(0,o.kt)("p",{parentName:"admonition"},"We recommend HTTPS because it is the easiest to set up in the wild, and by users who are new to all this.\nAlthough, we strongly recommend using an SSH connection when interacting with GitHub. If you are to this and are interested read more about it ",(0,o.kt)("a",{parentName:"p",href:"https://docs.github.com/en/authentication/connecting-to-github-with-ssh"},"here"),"."),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"git clone -b testnet-alpha-0 https://github.com/fleek-network/lightning.git <DIRECTORY-NAME>\n")),(0,o.kt)("p",{parentName:"admonition"},"Here's an example of what it'd look like when sticking to the recommended path location:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"git clone -b testnet-alpha-0 https://github.com/fleek-network/lightning.git ~/fleek-network/lightning\n"))))}l.isMDXComponent=!0},3872:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(7294);const o=e=>{let{image:t,name:n,title:o,url:i}=e;return a.createElement("section",{className:"author_card"},a.createElement("div",null,a.createElement("span",{className:"avatar"},a.createElement("a",{href:i,target:"_blank",alt:n},a.createElement("img",{src:t,alt:n}))),a.createElement("div",null,a.createElement("span",{className:"name"},a.createElement("a",{href:i,target:"_blank",alt:n},n)),a.createElement("span",{className:"title"},o),a.createElement("span",{className:"discord"},"Got questions? Find us on ",a.createElement("a",{href:"https://discord.gg/fleekxyz",target:"_blank"},"Discord!")))))}},789:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>p,toc:()=>c});var a=n(7462),o=(n(7294),n(3905));var i=n(3872),l=n(2915);const r={title:"Install",hide_title:!0,slug:"Install",date:new Date("2023-08-21T23:00:00.000Z"),canonical:"",description:"The Fleek Network Lightning CLI installation walkthrough",category:"Tutorial",tags:["CDN","Guide","Getting Started","Fleek Network","Rust dependencies","compile","build","wizard","manual"]},s=void 0,p={unversionedId:"node/install",id:"node/install",title:"Install",description:"The Fleek Network Lightning CLI installation walkthrough",source:"@site/docs/node/install.md",sourceDirName:"node",slug:"/node/Install",permalink:"/docs/node/Install",draft:!1,tags:[{label:"CDN",permalink:"/docs/tags/cdn"},{label:"Guide",permalink:"/docs/tags/guide"},{label:"Getting Started",permalink:"/docs/tags/getting-started"},{label:"Fleek Network",permalink:"/docs/tags/fleek-network"},{label:"Rust dependencies",permalink:"/docs/tags/rust-dependencies"},{label:"compile",permalink:"/docs/tags/compile"},{label:"build",permalink:"/docs/tags/build"},{label:"wizard",permalink:"/docs/tags/wizard"},{label:"manual",permalink:"/docs/tags/manual"}],version:"current",frontMatter:{title:"Install",hide_title:!0,slug:"Install",date:"2023-08-21T23:00:00.000Z",canonical:"",description:"The Fleek Network Lightning CLI installation walkthrough",category:"Tutorial",tags:["CDN","Guide","Getting Started","Fleek Network","Rust dependencies","compile","build","wizard","manual"]},sidebar:"docs",previous:{title:"Testnet onboarding",permalink:"/docs/node/testnet-onboarding"},next:{title:"Roadmap",permalink:"/docs/roadmap"}},u={},c=[{value:"Assisted installer",id:"assisted-installer",level:2},{value:"Prerequesites",id:"prerequesites",level:3},{value:"Connect to your server",id:"connect-to-your-server",level:3},{value:"Create a user",id:"create-a-user",level:3},{value:"Run the script for a quick install",id:"run-the-script-for-a-quick-install",level:3},{value:"About the process",id:"about-the-process",level:3},{value:"Manual installation",id:"manual-installation",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Create a user",id:"create-a-user-1",level:3},{value:"Install Rust with Rustup tool",id:"install-rust-with-rustup-tool",level:3},{value:"Lightning installer rust dependencies",id:"lightning-installer-rust-dependencies",level:3},{value:"Linux dependencies",id:"linux-dependencies",level:3},{value:"Installing Lightning CLI",id:"installing-lightning-cli",level:3},{value:"Key generator",id:"key-generator",level:3},{value:"Set testnet in config.toml",id:"set-testnet-in-configtoml",level:3},{value:"Start the node",id:"start-the-node",level:3},{value:"Systemd Service Setup",id:"systemd-service-setup",level:3},{value:"Health Check",id:"health-check",level:2},{value:"Use Systemctl to manage Systemd Service",id:"use-systemctl-to-manage-systemd-service",level:2},{value:"Analyzing Log Messages",id:"analyzing-log-messages",level:2}],d={toc:c};function h(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This section describes how to install the Fleek Network Lightning on supported operating systems. The installation can be made quicker by running the ",(0,o.kt)("a",{parentName:"p",href:"#assisted-installer"},"assisted installer")," or by following the ",(0,o.kt)("a",{parentName:"p",href:"#manual-installation"},"manual installation")," if you want a bit more control."),(0,o.kt)("admonition",{title:"Warning",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"If you'd like to participate in the ",(0,o.kt)("a",{parentName:"p",href:"/docs/roadmap"},"alpha Testnet"),", you have to go through the onboarding process. Check the ",(0,o.kt)("a",{parentName:"p",href:"/docs/node/requirements"},"requirements")," and find the ",(0,o.kt)("a",{parentName:"p",href:"/docs/node/testnet-onboarding"},"onboarding instructions")," to enable you to proceed and ",(0,o.kt)("a",{parentName:"p",href:"/docs/node/install"},"install")," a network node successfully.")),(0,o.kt)("h2",{id:"assisted-installer"},"Assisted installer"),(0,o.kt)("p",null,"The assisted installer is a script written in ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Bash_(Unix_shell)"},"Bash")," (Unix shell) that is available as a curl command line."),(0,o.kt)("h3",{id:"prerequesites"},"Prerequesites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"A basic knowledge of command line interface (CLI)"),(0,o.kt)("li",{parentName:"ul"},"A ",(0,o.kt)("a",{parentName:"li",href:"/docs/node/requirements#server"},"supported")," Linux server")),(0,o.kt)("h3",{id:"connect-to-your-server"},"Connect to your server"),(0,o.kt)("p",null,"Connect to the Linux server where the Node's going to be installed via SSH by opening a shell session there."),(0,o.kt)("p",null,"If you have set up a public SSH key for the machine, connecting to the server should be as simple as:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"ssh <USERNAME>@<REMOTE_HOST>\n")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Check the cloud provider for instructions to understand how to setup an ssh connection and connect to it remotely. Some other users might have local access to a ",(0,o.kt)("a",{parentName:"p",href:"/docs/node/requirements#server"},"supported")," Linux server. To keep this guide short, we'll assume you've rented a VPS from a cloud provider.")),(0,o.kt)("h3",{id:"create-a-user"},"Create a user"),(0,o.kt)("p",null,"To start, you must have an administrative account, such as ",(0,o.kt)("strong",{parentName:"p"},"root")," or ",(0,o.kt)("strong",{parentName:"p"},"sudoer"),". This will allow us to install or required dependencies and libraries. We recommend using a ",(0,o.kt)("strong",{parentName:"p"},"sudoer")," user account. Thus, if you're logged in as ",(0,o.kt)("strong",{parentName:"p"},"root")," you can create a new user and add to the ",(0,o.kt)("strong",{parentName:"p"},"sudo")," group by running:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"adduser <USERNAME>\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"For our example, we'll be using the name ",(0,o.kt)("inlineCode",{parentName:"p"},"lgtn")," but you can pick whichever you'd like.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"adduser lgtn\n")),(0,o.kt)("p",null,"After completing the ",(0,o.kt)("inlineCode",{parentName:"p"},"adduser")," steps, execute the ",(0,o.kt)("inlineCode",{parentName:"p"},"usermod")," to add the ",(0,o.kt)("inlineCode",{parentName:"p"},"user")," to the ",(0,o.kt)("strong",{parentName:"p"},"sudo")," group, as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"usermod -aG sudo lgtn\n")),(0,o.kt)("p",null,"Finally, switch to the new ",(0,o.kt)("strong",{parentName:"p"},"user")," by using the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"su lgtn\n")),(0,o.kt)("h3",{id:"run-the-script-for-a-quick-install"},"Run the script for a quick install"),(0,o.kt)("p",null,"Copy and paste it to the server host terminal and execute it to launch the assisted installation process, as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"curl https://get.fleek.network | bash\n")),(0,o.kt)("p",null,"On success, you should be greeted by the following welcome screen:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'\u2b50\ufe0f Fleek Network Lightning CLI installer \u2b50\ufe0f\n\n            zeeeeee-\n            z$$$$$$"\n          d$$$$$$"\n          d$$$$$P\n        d$$$$$P\n        $$$$$$"\n      .$$$$$$"\n    .$$$$$$"\n    4$$$$$$$$$$$$$"\n  z$$$$$$$$$$$$$"\n  """""""3$$$$$"\n        z$$$$P\n        d$$$$"\n      .$$$$$"\n    z$$$$$"\n    z$$$$P\n  d$$$$$$$$$$"\n  *******$$$"\n      .$$$"\n      .$$"\n    4$P"\n    z$"\n  zP\n  z"\n/\n\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83c\udf0d Website https://fleek.network\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83d\udcda Documentation https://docs.fleek.network\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83d\udcbe Git repository https://github.com/fleek-network/lightning\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83e\udd16 Discord https://discord.gg/fleekxyz\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83d\udc24 Twitter https://twitter.com/fleek_net\n\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605\u2605 \ud83c\udfa8 Ascii art by https://www.asciiart.eu\n\n...\n\nRemaining output omitted for brevity, you\'ll not see this text line\n')),(0,o.kt)("p",null,"Follow the installation wizard to have the Fleek Network Lightning CLI and service installed on the ",(0,o.kt)("a",{parentName:"p",href:"/docs/node/requirements"},"supported server"),"."),(0,o.kt)("p",null,"After creating the service file, you should reload the Systemd process, to apply the newly created service. You can do this by executing:"),(0,o.kt)("p",null,"After creating the service, launch the service by executing the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"systemctl start lightning.service\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To learn more about Systemctl commands, visit the section ",(0,o.kt)("a",{parentName:"p",href:"#use-systemctl-to-manage-systemd-service"},"Use Systemctl to manage the Lightning Service"))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Find the timeline of events for the Lightning service by checking the log files. Learn about it in the section ",(0,o.kt)("a",{parentName:"p",href:"#analyzing-log-messages"},"Log Messages"),".")),(0,o.kt)("p",null,"Once the installation is complete, do a health check! Check the section ",(0,o.kt)("a",{parentName:"p",href:"#health-check"},"Health Check")," to learn how to do a node health checkup."),(0,o.kt)("h3",{id:"about-the-process"},"About the process"),(0,o.kt)("p",null,"The installation process is open source and transparent. The source is available in the ",(0,o.kt)("a",{parentName:"p",href:"https://get.fleek.network"},"get.fleek.network")," or the origin repository ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/fleek-network/get.fleek.network"},"here"),"."),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},'"Get Fleek Network" is an attempt to make our software more accessible. By providing scripts to automate the installation process of our software, we believe that it can help improve the onboarding experience of our users.')),(0,o.kt)("p",null,"The installer assists the node operator by automating the Lightning CLI build from the open-source code and setting up the system service. A node operator should use the assisted installer to ease onboarding, reduce repetition,"),(0,o.kt)("p",null,"At a high level, the installer will:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Install required dependencies, e.g. rust toolchain"),(0,o.kt)("li",{parentName:"ul"},"Pull the source code from the origin ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/fleek-network/lightning"},"repository")),(0,o.kt)("li",{parentName:"ul"},"Build the binary, e.g. a ",(0,o.kt)("inlineCode",{parentName:"li"},"lightning CLI")," (lgtn) is compiled from source code"),(0,o.kt)("li",{parentName:"ul"},"Setup a ",(0,o.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/Systemd"},"Systemd")," service named lightning"),(0,o.kt)("li",{parentName:"ul"},"Provide instructions to launch, stop the Fleek network via the Systemd lightning service")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Remember that if you use the assisted installer, you won't have to do the ",(0,o.kt)("a",{parentName:"p",href:"#manual-installation"},"manual installation")," process as described in the next section. On success, the assisted installer should provide the same result as following the manual instructions.")),(0,o.kt)("h2",{id:"manual-installation"},"Manual installation"),(0,o.kt)("p",null,"The following section will walk through the dependencies and Rust installation process for Linux. If you're on Windows, we recommend to setup ",(0,o.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/windows/wsl/install"},"Windows Subsystem Linux"),", reading the ",(0,o.kt)("a",{parentName:"p",href:"https://ubuntu.com/tutorials/install-ubuntu-on-wsl2-on-windows-10#1-overview"},"Ubuntu tutorial")," or picking another ",(0,o.kt)("a",{parentName:"p",href:"/docs/node/requirements#server"},"supported distro"),". The WSL will let you use Linux applications, utilities and bash command tools you'll find in the tutorial."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"We're only supporting Linux operating system (server edition). Find the list of supported OS ",(0,o.kt)("a",{parentName:"p",href:"/docs/node/requirements#server"},"here"),".")),(0,o.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"To follow the guide, you will need the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Familiarity with the command-line interface"),(0,o.kt)("li",{parentName:"ul"},"Git")),(0,o.kt)("p",null,"You're required to have some experience with the command-line interface and have Git installed; Also, you should be happy to troubleshoot, since versions might differ from the time of writing and reading. Most times, a simple web search provides the best answers."),(0,o.kt)("p",null,"If you don't have Git installed, learn more about it and the instructions by reading the ",(0,o.kt)("a",{parentName:"p",href:"https://git-scm.com/book/en/v2"},"Git documentation"),"."),(0,o.kt)("h3",{id:"create-a-user-1"},"Create a user"),(0,o.kt)("p",null,"We recommend creating a ",(0,o.kt)("inlineCode",{parentName:"p"},"non-root")," user with administrative privileges. It'll allow us to install any system requirements."),(0,o.kt)("p",null,"You can create a new user and add to the ",(0,o.kt)("strong",{parentName:"p"},"sudo")," group by running:"),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"For our example, we'll be using the name ",(0,o.kt)("inlineCode",{parentName:"p"},"lgtn")," but you can pick whichever you'd like. If you already have a ",(0,o.kt)("strong",{parentName:"p"},"sudoer")," account, you can skip this step.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"adduser lgtn\n")),(0,o.kt)("p",null,"After completing the ",(0,o.kt)("inlineCode",{parentName:"p"},"adduser")," steps, execute the ",(0,o.kt)("inlineCode",{parentName:"p"},"usermod")," to add the ",(0,o.kt)("inlineCode",{parentName:"p"},"user")," to the ",(0,o.kt)("strong",{parentName:"p"},"sudo")," group, as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"usermod -aG sudo lgtn\n")),(0,o.kt)("p",null,"Finally, switch to the new ",(0,o.kt)("strong",{parentName:"p"},"user")," by using the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"su lgtn\n")),(0,o.kt)("h3",{id:"install-rust-with-rustup-tool"},"Install Rust with Rustup tool"),(0,o.kt)("p",null,"Visit the ",(0,o.kt)("a",{parentName:"p",href:"https://www.rust-lang.org/"},"Rust website")," getting started guide, to find, copy and run the ",(0,o.kt)("a",{parentName:"p",href:"https://rustup.rs/"},"Rustup tool")," for installation and version management."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"https://curl.se/"},"curl")," is an application that is generally available in most OS, if missing install it. Find more ",(0,o.kt)("a",{parentName:"p",href:"https://curl.se/"},"here"),".")),(0,o.kt)("p",null,"Alternatively, if you have installed Rust in the past, you may want to update it \ud83d\udc4c."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"rustup update\n")),(0,o.kt)("p",null,"During the installation process, if asked about preferences, select the default option!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"You can uninstall at any time with rustup self uninstall and\nthese changes will be reverted.\n\nCurrent installation options:\n\n\n   default host triple: x86_64-unknown-linux-gnu\n     default toolchain: stable (default)\n               profile: default\n  modify PATH variable: yes\n\n1) Proceed with installation (default)\n2) Customize installation\n3) Cancel installation\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Once complete, you'll have to restart your current shell or reload the \"PATH\" environment variable to include Cargo's bin directory ",(0,o.kt)("inlineCode",{parentName:"p"},"$HOME/.cargo/bin"),'. This is required to let you use "cargo" command globally.')),(0,o.kt)("p",null,"To configure your current shell, run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'source "$HOME/.cargo/env"\n')),(0,o.kt)("p",null,"From then on, the latest version of Cargo (Rust's build and package manager tool) should be installed. Learn more about Cargo, ",(0,o.kt)("a",{parentName:"p",href:"https://doc.rust-lang.org/cargo/index.html"},"here"),"."),(0,o.kt)("p",null,"Check the ",(0,o.kt)("inlineCode",{parentName:"p"},"version")," to confirm's working correctly:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"cargo --version\n")),(0,o.kt)("p",null,"Here's the output we got (beware that our version might differ to yours, it's expected \ud83d\ude05)."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"cargo 1.65.0 (4bc8f24d3 2022-10-20)\n")),(0,o.kt)("h3",{id:"lightning-installer-rust-dependencies"},"Lightning installer rust dependencies"),(0,o.kt)("p",null,"Rustup subcommands deal with ",(0,o.kt)("a",{parentName:"p",href:"https://rust-lang.github.io/rustup/concepts/toolchains.html"},"toolchains"),", a collection of programs required to compile a Rust application."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"rustup toolchain list\n")),(0,o.kt)("p",null,"For example, on Linux Ubuntu we generally have it set to the default:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"stable-x86_64-unknown-linux-gnu (default)\n")),(0,o.kt)("p",null,"While on macOS:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"stable-x86_64-apple-darwin (default)\n")),(0,o.kt)("p",null,"Make sure you have Rustup set to the desired toolchain as default if required \ud83d\udc81\u200d\u2640\ufe0f!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"rustup default <TOOLCHAIN-LIST-NAME>\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Rust compilation is long and compiler caching can help speed things up immensely. The Lightning CLI project can be used to reduce the perceived compilation times.")),(0,o.kt)("h3",{id:"linux-dependencies"},"Linux dependencies"),(0,o.kt)("p",null,"On Linux (we'll stick with Ubuntu as the Linux distro example), start by updating the package information in the source list and then upgrade all the installed packages with the latest versions (do the equivalent for your Linux distro), as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo apt-get update\nsudo apt-get upgrade\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You can optionally pass the ",(0,o.kt)("inlineCode",{parentName:"p"},"y")," flag to skip any user prompts e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"sudo apt-get update -y")," to any remaining apt-get commands.")),(0,o.kt)("p",null,"Install the build-essentials packages, necessary for compiling general software and for our use-case Lightning CLI."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo apt-get install build-essential\n")),(0,o.kt)("p",null,"Followed by the required tools to compile the application (",(0,o.kt)("a",{parentName:"p",href:"https://cmake.org/"},"cmake"),", ",(0,o.kt)("a",{parentName:"p",href:"https://clang.llvm.org/"},"clang"),", ",(0,o.kt)("a",{parentName:"p",href:"https://www.freedesktop.org/wiki/Software/pkg-config/"},"pkg-config")," and ",(0,o.kt)("a",{parentName:"p",href:"https://packages.debian.org/sid/libssl-dev"},"libssl-dev "),")."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo apt-get install cmake clang pkg-config libssl-dev gcc-multilib\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"For Debian, you should install ",(0,o.kt)("inlineCode",{parentName:"p"},"gcc"),", as follows:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo apt-get install gcc\nsudo apt-get update\n"))),(0,o.kt)("p",null,"Now install the ",(0,o.kt)("a",{parentName:"p",href:"https://grpc.io/docs/protoc-installation/"},"Protobufer Compiler"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo apt-get install protobuf-compiler\n")),(0,o.kt)("p",null,"Ensure the compiler version is 3+"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"protoc --version\n")),(0,o.kt)("h3",{id:"installing-lightning-cli"},"Installing Lightning CLI"),(0,o.kt)("p",null,"If you haven't already, clone the Fleek Network's Lightning repository to your machine."),(0,o.kt)(l.ZP,{mdxType:"GitCloneOptions"}),(0,o.kt)("p",null,"When git clone completes \ud83d\udc4d, ",(0,o.kt)("inlineCode",{parentName:"p"},"change directory")," to the project directory e.g. we cloned to the default name ",(0,o.kt)("inlineCode",{parentName:"p"},"~/fleek-network/lightning"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"cd ~/fleek-network/lightning\n")),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"~/fleek-network/lightning")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"$HOME/fleek-network/lightning")," directory is the default or recommended location to store the repository. If you like to follow conventions, then is best to stick with the recommendation, to avoid confusion and make it easier to follow our documentation.")),(0,o.kt)("p",null,"If you list (",(0,o.kt)("inlineCode",{parentName:"p"},"ls"),") the files in the directory, it should be similar to:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},".\n\u251c\u2500\u2500 CODE_OF_CONDUCT.md\n\u251c\u2500\u2500 CONTRIBUTING.md\n\u251c\u2500\u2500 Cargo.lock\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 codecov.yml\n\u251c\u2500\u2500 core\n\u251c\u2500\u2500 docs\n\u251c\u2500\u2500 lib\n\u251c\u2500\u2500 lightning.toml\n\u251c\u2500\u2500 rust-toolchain\n\u251c\u2500\u2500 rustfmt.toml\n\u251c\u2500\u2500 services\n\u2514\u2500\u2500 target\n")),(0,o.kt)("p",null,"At this point, you should be able to run the ",(0,o.kt)("inlineCode",{parentName:"p"},"install")," command successfully."),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"If you already had Rust installed, or the project before, and skipped instructions directly here, there might be case where you get errors. So, make sure to clear your work directory:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"cargo clean\ncargo update\n")),(0,o.kt)("p",null,"Start the ",(0,o.kt)("inlineCode",{parentName:"p"},"install")," process by running the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"cargo build\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"At the time of writing, Fleek Network lightning is under development, thus we're using the ",(0,o.kt)("inlineCode",{parentName:"p"},"cargo build")," command. Alternatively, you're recommended to use the ",(0,o.kt)("inlineCode",{parentName:"p"},"+stable"),", e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"cargo +stable build"),".")),(0,o.kt)("p",null,"The installation process is long, as it compiles the application binary for us from the source code."),(0,o.kt)("p",null,"\ud83c\udf08 Here's the output when successful! Note, that the output might differ slightly from time of writting."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"    Finished release [optimized] target(s) in 11m 22s\n  Installing /root/.cargo/bin/lightning\n   Installed package `lightning v0.1.0 (/crates/lightning)` (executable `lightning`)\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Once Rust generates the binary ",(0,o.kt)("inlineCode",{parentName:"p"},"lightning-node"),", you can find it in the project root ",(0,o.kt)("inlineCode",{parentName:"p"},"target")," directory. Depending on the usage of ",(0,o.kt)("inlineCode",{parentName:"p"},"+stable")," flag, the binary should be located at ",(0,o.kt)("inlineCode",{parentName:"p"},"~/fleek-network/lightning/target/debug/lightning-node")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"~/fleek-network/lightning/target/release/lightning-node"),".")),(0,o.kt)("p",null,"You can create an ",(0,o.kt)("inlineCode",{parentName:"p"},"lgtn")," symbolic link to ",(0,o.kt)("inlineCode",{parentName:"p"},"/usr/local/bin")," to make it available globally."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'sudo ln -s "$HOME/fleek-network/lightning/target/debug/lightning-node" /usr/local/bin/lgtn\n')),(0,o.kt)("p",null,"After completing, you'll have the ability to type ",(0,o.kt)("inlineCode",{parentName:"p"},"lgtn")," to execute the binary anywhere for your user account. Other users might find it better to copy or create an ",(0,o.kt)("inlineCode",{parentName:"p"},"alias")," instead."),(0,o.kt)("p",null,"Run the ",(0,o.kt)("inlineCode",{parentName:"p"},"lgtn help")," sub-command as a checkup:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"Usage: lightning-node [OPTIONS] <COMMAND>\n\nCommands:\n  run           Start the node\n  keys          Handle keys\n  print-config  Print the loaded configuration\n  help          Print this message or the help of the given subcommand(s)\n\nOptions:\n  -c, --config <CONFIG>      Path to the toml configuration file [default: lightning.toml]\n      --with-mock-consensus  Determines that we should be using the mock consensus backend\n  -v...                      Increases the level of verbosity (the max level is -vvv)\n      --log-location         Print code location on console logs\n  -h, --help                 Print help\n  -V, --version              Print version\n")),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Beware that your output might differ a bit, as ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/fleek-network/lightning"},"Lightning"),' is in constant development. Note that you\'ll have to "re-install" every time you want to pull updates from the source repository, as the update at the time of writing is done manually and not automatically.')),(0,o.kt)("h3",{id:"key-generator"},"Key generator"),(0,o.kt)("p",null,"Before starting the node, you should generate a public and private key."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"lgtn keys generate\n")),(0,o.kt)("p",null,"The keys will be generated and placed under the system directory ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.lightning/keystore"),". The ",(0,o.kt)("inlineCode",{parentName:"p"},"private")," key is the user's responsibility and no one else can generate or recover it for you, including Fleek Network or any team member. Your keys, your responsibility!"),(0,o.kt)("h3",{id:"set-testnet-in-configtoml"},"Set testnet in config.toml"),(0,o.kt)("p",null,"Set the testnet attribute to ",(0,o.kt)("inlineCode",{parentName:"p"},"true")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"config.toml")," lcated in the path ",(0,o.kt)("inlineCode",{parentName:"p"},"~/.lightning/config.toml"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'[application]\ndb_path = "~/.lightning/data/app_data"\nmode = "Prod"\nstorage = "RocksDb"\ntestnet = true\n\n...\n')),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"The configuration file should have more content, which was omitted here to keep it short and to the point. You're interested in the ",(0,o.kt)("inlineCode",{parentName:"p"},"testnet")," property name only.")),(0,o.kt)("h3",{id:"start-the-node"},"Start the node"),(0,o.kt)("admonition",{title:"Warning",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"To participate in the ",(0,o.kt)("a",{parentName:"p",href:"/docs/roadmap"},"alpha Testnet"),", you have to through the onboarding process. Make sure you request access by following the ",(0,o.kt)("a",{parentName:"p",href:"/docs/node/testnet-onboarding"},"onboarding instructions"),". If you fail to enable your node for testnet, it'll not run!")),(0,o.kt)("p",null,"To start the node, you should execute the sub-command ",(0,o.kt)("inlineCode",{parentName:"p"},"run"),". Noteworthy that while it launches the node, you're recommended to setup a systemd service to run it for a long period."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"lgtn run\n")),(0,o.kt)("admonition",{title:"WARNING",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"We recommend setting up the process as a systemd service, as it's a long-running process. Instructions to setup a systemd service are available in the section ",(0,o.kt)("a",{parentName:"p",href:"#systemd-service-setup"},"Systemd Service Setup"),".")),(0,o.kt)("p",null,"Great! You have successfully installed all the required packages, and libraries and have compiled and installed lightning. Check the section ",(0,o.kt)("a",{parentName:"p",href:"#health-check"},"Health Check")," to learn how to do a node health checkup."),(0,o.kt)("h3",{id:"systemd-service-setup"},"Systemd Service Setup"),(0,o.kt)("p",null,"Create a new Systemd service file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo touch /etc/systemd/system/lightning.service\n")),(0,o.kt)("p",null,"Open the file and put the following content:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"[Unit]\nDescription=Fleek Network Node lightning service\n\n[Service]\nUser=lgtn\nType=simple\nMemoryHigh=32G\nRestartSec=15s\nRestart=always\nExecStart=lgtn run\nStandardOutput=append:/var/log/lightning/output.log\nStandardError=append:/var/log/lightning/diagnostic.log\n\n[Install]\nWantedBy=multi-user.target\n")),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"Notice that we're using ",(0,o.kt)("inlineCode",{parentName:"p"},"lgnt")," as the username. If you have a different custom username change it accordingly. Beware that we've recommended using a ",(0,o.kt)("inlineCode",{parentName:"p"},"non-root")," user, as described in the section ",(0,o.kt)("a",{parentName:"p",href:"#create-a-user-1"},"create a user"),".")),(0,o.kt)("p",null,"Change the file permissions for the service:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo chmod 644 /etc/systemd/system/lightning.service\n")),(0,o.kt)("p",null,"After creating the service file, you should reload the Systemd process, to apply the newly created service. You can do this by executing:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl daemon-reload\n")),(0,o.kt)("p",null,"To start the service at boot, use the enable command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl enable lightning.service\n")),(0,o.kt)("p",null,"Create the directory where the log message will be stored, as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo mkdir -p /var/log/lightning\n")),(0,o.kt)("p",null,"You may want to create empty placeholders for the stdout and stderr log files:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo touch /var/log/lightning/output.log\nsudo touch /var/log/lightning/diagnostic.log\n")),(0,o.kt)("admonition",{title:"WARNING",type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"We're assuming that you've ",(0,o.kt)("a",{parentName:"p",href:"#create-a-user-1"},"created a new user")," and can start the service operating without ",(0,o.kt)("strong",{parentName:"p"},"sudo"),".")),(0,o.kt)("p",null,"Start the service by:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"systemctl start lightning.service\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Find the timeline of events for the Lightning service by checking the log files. Learn about it in the section ",(0,o.kt)("a",{parentName:"p",href:"#analyzing-log-messages"},"Log Messages"),".")),(0,o.kt)("p",null,"To learn more, visit the section ",(0,o.kt)("a",{parentName:"p",href:"#use-systemctl-to-manage-systemd-service"},"Use Systemctl to manage the Lightning Service")),(0,o.kt)("h2",{id:"health-check"},"Health Check"),(0,o.kt)("p",null,"A health check is a special API endpoint that's used to validate the status of a service. To do a health check of a Fleek Network node use the JSON RPC interface via the command line."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"We're going to use cURL, make sure that you have it installed otherwise install it in your operating system.")),(0,o.kt)("p",null,"We'll send a request to the JSON RPC ",(0,o.kt)("inlineCode",{parentName:"p"},"flk_ping")," method. Execute the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'$ curl -X POST -H "Content-Type: application/json" -d \'{\n      "jsonrpc": "2.0",\n      "method": "flk_ping",\n      "params": [],\n      "id": 1\n    }\' http://127.0.0.1:4069/rpc/v0\n')),(0,o.kt)("p",null,"If the request is successful, you should get the result ",(0,o.kt)("inlineCode",{parentName:"p"},"pong")," as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},'{\n  "jsonrpc": "2.0",\n  "result": "pong",\n  "id": 1\n}\n')),(0,o.kt)("h2",{id:"use-systemctl-to-manage-systemd-service"},"Use Systemctl to manage Systemd Service"),(0,o.kt)("p",null,"Learn how to enable, disable, start, stop the Systemd Service for Fleek Network. The service is set up by the ",(0,o.kt)("a",{parentName:"p",href:"#assisted-installer"},"Assisted installer")," (automatically), or manually (optional) as described in ",(0,o.kt)("a",{parentName:"p",href:"#manual-installation"},"Manual installation"),"."),(0,o.kt)("p",null,"Reload the Systemctl daemon by executing the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl daemon-reload\n")),(0,o.kt)("p",null,"Enable the service for starting up on system boot:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl enable lightning.service\n")),(0,o.kt)("admonition",{type:"caution"},(0,o.kt)("p",{parentName:"admonition"},"You shouldn't prefix the systemctl command with ",(0,o.kt)("strong",{parentName:"p"},"sudo")," when start/stop/status the service.")),(0,o.kt)("p",null,"Start the service by:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"systemctl start lightning\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"When naming the service, the *.service can be omitted. For this reason the command can be typed as follows:"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"systemctl start lightning\n"))),(0,o.kt)("p",null,"Stop the service by:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"systemctl stop lightning\n")),(0,o.kt)("p",null,"Restart the service by:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"systemctl restart lightning\n")),(0,o.kt)("p",null,"Check the service status by:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"systemctl status lightning.service\n")),(0,o.kt)("h2",{id:"analyzing-log-messages"},"Analyzing Log Messages"),(0,o.kt)("p",null,"The service logs provide a timeline of events for the Lightning service that is valuable for troubleshooting when encountering issues. When issues arise, analyzing log files is the first thing a node operator needs to do."),(0,o.kt)("p",null,"To have the log message files (output.log and diagnostic.log), these have to be set up. If you have installed the Node via the ",(0,o.kt)("a",{parentName:"p",href:"#assisted-installer"},"Assisted installer"),", the logs are set up for you automatically."),(0,o.kt)("p",null,"You can watch the Node output by running the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"tail -f /var/log/lightning/output.log\n")),(0,o.kt)("p",null,"You can watch the Node diagnostics or errors by running the command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"tail -f /var/log/lightning/diagnostic.log\n")),(0,o.kt)(i.Z,{name:"Helder Oliveira",image:"https://github.com/heldrida.png",title:"Software Developer + DX",url:"https://github.com/heldrida",mdxType:"Author"}))}h.isMDXComponent=!0}}]);