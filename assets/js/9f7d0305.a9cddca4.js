"use strict";(self.webpackChunkdocta=self.webpackChunkdocta||[]).push([[4713],{3890:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>g,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var t=s(5893),o=s(1151),i=s(3872);const r={title:"Analyzing logs",slug:"analyzing-logs",hide_title:!0,tags:["logs","diagnostic"]},a=void 0,l={id:"node/analyzing-logs",title:"Analyzing logs",description:"Analyzing Logs",source:"@site/docs/node/analyzing-logs.md",sourceDirName:"node",slug:"/node/analyzing-logs",permalink:"/docs/node/analyzing-logs",draft:!1,unlisted:!1,tags:[{label:"logs",permalink:"/docs/tags/logs"},{label:"diagnostic",permalink:"/docs/tags/diagnostic"}],version:"current",frontMatter:{title:"Analyzing logs",slug:"analyzing-logs",hide_title:!0,tags:["logs","diagnostic"]},sidebar:"docs",previous:{title:"Health check",permalink:"/docs/node/health-check"},next:{title:"Systemd Service",permalink:"/docs/node/systemd-service"}},d={},c=[{value:"Analyzing Logs",id:"analyzing-logs",level:2},{value:"Resource monitoring",id:"resource-monitoring",level:2},{value:"Log messages",id:"log-messages",level:2},{value:"Log types",id:"log-types",level:2},{value:"Watch logs",id:"watch-logs",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"analyzing-logs",children:"Analyzing Logs"}),"\n",(0,t.jsx)(n.p,{children:"The service logs provide a timeline of events for the Lightning service that is valuable for troubleshooting when encountering issues\u2013when issues arise, analyzing log files is the first thing a node operator needs to do."}),"\n",(0,t.jsxs)(n.p,{children:["If you've installed the Node via the ",(0,t.jsx)(n.a,{href:"/docs/node/install#assisted-installer",children:"assisted installer"}),", the logs are set up for you automatically. Otherwise, you have to follow the instructions provided in the ",(0,t.jsx)(n.a,{href:"/docs/node/install#manual-installation",children:"manual installation"})," section."]}),"\n",(0,t.jsx)(n.h2,{id:"resource-monitoring",children:"Resource monitoring"}),"\n",(0,t.jsx)(n.p,{children:"The Fleek Network Node is initialized by running the Lightning CLI which creates a process in the operating system. The process responds to requests over an inter-communication mechanism we denominate as the network."}),"\n",(0,t.jsx)(n.p,{children:"Thus, we call the Fleek Network Node a service, meaning that the node process is a sort of application that runs as a service on a server. In the practical terms, the Lightning CLI initializes a node as a client version used to access the main service provider, the Fleek Network, composed by any number of these nodes."}),"\n",(0,t.jsx)(n.p,{children:"As Fleek Network is used by getting and serving service requests, the node responds as a resource in the system, providing a certain level of computation to the end-user. Running nodes write to the standard output stream well-defined log messages\u2013some more human friendly than others."}),"\n",(0,t.jsx)(n.p,{children:"Log messages are well formatted, with an identifier describing the type: INFO, WARN, ERR, DEBUG, TRACE, etc. As Lightning CLI is in constant development, during the current development stage the output from the node is expected to be highly verbose. This helps the development team get feedback. Amongst others, you might see logs of the following types: debug and trace. For a non-developer human, can cause the feeling of reading the most dreadful information, as it should only spark joy when helping troubleshoot or make development decisions. Node operators should not panic when finding warnings, debug or trace messages as these are expected and can be ignored."}),"\n",(0,t.jsx)(n.h2,{id:"log-messages",children:"Log messages"}),"\n",(0,t.jsxs)(n.p,{children:["Log messages are well formatted and have an associated type, as described in ",(0,t.jsx)(n.a,{href:"#resource-monitoring",children:"resource monitoring"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"Here are some of the types, a user can encounter:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"ERROR - The error designates very serious errors."}),"\n",(0,t.jsx)(n.li,{children:"WARN - The warning designates hazardous situations."}),"\n",(0,t.jsx)(n.li,{children:"INFO - The info designates useful information."}),"\n",(0,t.jsx)(n.li,{children:"DEBUG - The debug designates lower-priority information."}),"\n",(0,t.jsx)(n.li,{children:"TRACE - The trace designates very low-priority, often extremely verbose, information."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Depending on development time and schedule, some Log message types might be present in your output that offer very low-priority information, but that can be of good use for the development team, e.g. the debug and trace are good examples."}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["The log messages can be quite intimidating for some users, but if you've run a ",(0,t.jsx)(n.a,{href:"/docs/node/health-check",children:"health check"})," successfully and no errors are found, you can ignore it. The logs are only meaningful when troubleshooting, monitoring or asserting the response of certain operations."]}),(0,t.jsx)(n.p,{children:'Some users ask "Is it ok?", a few "Is my Node working?", other\'s "Is it working?"\u2013in general you shouldn\'t bother much about warning messages as those are expected through development and can be ignored by most users.'}),(0,t.jsxs)(n.p,{children:["Thus, it's best to use the ",(0,t.jsx)(n.a,{href:"/docs/node/health-check",children:"health checkup"})," to confirm if your system is running successfully."]})]}),"\n",(0,t.jsx)(n.h2,{id:"log-types",children:"Log types"}),"\n",(0,t.jsx)(n.p,{children:"Standard out and standard error are two data streams created when we launch the Lightning process, on Lightning process activity we redirect the data streams to files as follows:"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Standard output"})," - The text output from the service process is put in ",(0,t.jsx)(n.code,{children:"/var/log/lightning/output.log"})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Standard error"})," - The error messages from the service process are put in ",(0,t.jsx)(n.code,{children:"/var/log/lightning/diagnostic.log"})]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["By convention, most of the log files create on Linux are found under the directory ",(0,t.jsx)(n.code,{children:"/var/log/"}),", a standard area where system messages are logged and recorded."]})}),"\n",(0,t.jsx)(n.p,{children:"Because normal output and error messages have their own channel, they can be handled independently of one another. Thus, we keep this in separate files that aggregate the output messages emitted by the Lightning process."}),"\n",(0,t.jsx)(n.h2,{id:"watch-logs",children:"Watch logs"}),"\n",(0,t.jsx)(n.p,{children:"The log files can be monitored in real-time for diagnosis and troubleshooting purposes and the tail command is the most basic way for this purpose."}),"\n",(0,t.jsx)(n.p,{children:"You can watch the node standard output (stdout) by running the command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"tail -f /var/log/lightning/output.log\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or, watch the standard error (stderr) for node diagnostics by running the command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"tail -f /var/log/lightning/diagnostic.log\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsxs)(n.p,{children:["If you are controlling the Docker Container as a Systemd Service (Systemctl to start, stop or check the status) then the standard out (stdout) and standard error (stderr) logs are available as ",(0,t.jsx)(n.code,{children:"/var/log/lightning/*.log"}),"."]}),(0,t.jsx)(n.p,{children:"In any case, you can use the Docker command to analyze the logs. If you have stick with the default naming conventions it'd look like:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sh",children:"sudo docker logs -f lightning-node\n"})})]}),"\n",(0,t.jsx)(i.Z,{name:"Helder Oliveira",image:"https://github.com/heldrida.png",title:"Software Developer + DX",url:"https://github.com/heldrida"})]})}function g(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},3872:(e,n,s)=>{s.d(n,{Z:()=>o});s(7294);var t=s(5893);const o=e=>{let{image:n,name:s,title:o,url:i,communityMember:r=!1}=e;return(0,t.jsx)("section",{className:"author_card",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"avatar",children:(0,t.jsx)("a",{href:i,target:"_blank",alt:s,children:(0,t.jsx)("img",{src:n,alt:s})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"name",children:(0,t.jsx)("a",{href:i,target:"_blank",alt:s,children:s})}),(0,t.jsx)("span",{className:"title",children:o}),(0,t.jsxs)("span",{className:"discord",children:[r?"Join our community on":"Got questions? Find us on"," ",(0,t.jsx)("a",{href:"https://discord.gg/fleek",target:"_blank",children:"discord!"})]})]})]})})}},1151:(e,n,s)=>{s.d(n,{Z:()=>a,a:()=>r});var t=s(7294);const o={},i=t.createContext(o);function r(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);