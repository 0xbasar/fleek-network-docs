"use strict";(self.webpackChunkdocta=self.webpackChunkdocta||[]).push([[5318],{4798:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>r,metadata:()=>h,toc:()=>l});var s=n(5893),o=n(1151),a=n(3872);const r={title:"Health check",slug:"health-check",hide_title:!0,tags:["healthcheck","verification","node status"]},i=void 0,h={id:"node/health-check",title:"Health check",description:"TL;DR: Run the command",source:"@site/docs/node/health-check.md",sourceDirName:"node",slug:"/node/health-check",permalink:"/docs/node/health-check",draft:!1,unlisted:!1,tags:[{label:"healthcheck",permalink:"/docs/tags/healthcheck"},{label:"verification",permalink:"/docs/tags/verification"},{label:"node status",permalink:"/docs/tags/node-status"}],version:"current",frontMatter:{title:"Health check",slug:"health-check",hide_title:!0,tags:["healthcheck","verification","node status"]},sidebar:"docs",previous:{title:"Install",permalink:"/docs/node/install"},next:{title:"Analyzing logs",permalink:"/docs/node/analyzing-logs"}},c={},l=[{value:"TL;DR: Run the command",id:"tldr-run-the-command",level:2},{value:"Overview",id:"overview",level:2},{value:"What&#39;s a node health check?",id:"whats-a-node-health-check",level:2},{value:"The host address",id:"the-host-address",level:2},{value:"Communication ports",id:"communication-ports",level:2},{value:"Quick health check",id:"quick-health-check",level:2},{value:"JSON-RPC Health check",id:"json-rpc-health-check",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"tldr-run-the-command",children:"TL;DR: Run the command"}),"\n",(0,s.jsx)(t.p,{children:"A script is available to do and provide a health check overview:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"curl -sS https://get.fleek.network/healthcheck | bash\n"})}),"\n",(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(t.p,{children:"In network applications, a health check is a process of verifying the overall health and availability of a service. It usually involves sending a request to a specific endpoint of a service and receiving a response indicating the status. The response includes information about the status of the service, or any errors or warnings if not healthy. This helps developers, node operators, and system administrators identify and resolve issues that may affect the network, node performance and availability."}),"\n",(0,s.jsx)(t.p,{children:"A Node operator or system administrator can communicate with the node to confirm the status at any time."}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsx)(t.p,{children:"We're using cURL, for the examples, thus make sure that you have it installed on your operating system."})}),"\n",(0,s.jsx)(t.h2,{id:"whats-a-node-health-check",children:"What's a node health check?"}),"\n",(0,s.jsx)(t.p,{children:"A Node health check is exactly what it sounds like, a way of checking the health status of a Fleek Network node."}),"\n",(0,s.jsx)(t.p,{children:"A Node operator can do a health check (as it's common among system operators worth their title) to get feedback and see if the resource is operating successfully. It's a good practice for a Node operator to do it frequently, as otherwise there'd be no way of knowing whether the Node is running. For example, some advanced operators automate this process by using cronjobs and getting reports via email, etc."}),"\n",(0,s.jsx)(t.p,{children:"Health checks are valuable and a must for all the Node operators, as they are incentivized to participate in the network by making their resources available which the reward mechanism evaluates."}),"\n",(0,s.jsx)(t.p,{children:"Rewards are only a given for good behavior and thus an unhealthy Node or bad management can cause disappointment. A decentralized and permissionless network, which is beyond anyone's control (us included) requires some education by the users."}),"\n",(0,s.jsx)(t.p,{children:"A system can be highly customizable and understanding some basics can help you achieve success as a node operator, resource health checking is important."}),"\n",(0,s.jsx)(t.p,{children:"Fleek Network depends on the Node operator's success, thus we try to keep things simple and try to motivate you to learn for the network's overall health. That's what a Node health check is about, your contribution!"}),"\n",(0,s.jsx)(t.h2,{id:"the-host-address",children:"The host address"}),"\n",(0,s.jsxs)(t.p,{children:["When a Fleek Network Node is initialized, the address which is bound to is ",(0,s.jsx)(t.code,{children:"0.0.0.0"}),", meaning that the service is listening to all the host-configured network interfaces, such as ",(0,s.jsx)(t.code,{children:"127.0.0.1"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"Any traffic sent to an addressable interface that hits the correct endpoint or port number should have a response by the node. Of course, bear in mind that your system should not have any form of firewall or blockers configured."}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"127.0.0.1"})," is generally the IP address assigned to the ",(0,s.jsx)(t.strong,{children:"loopback"})," or local-only interface, which is a mock network adapter that only allows communication within the same host."]})}),"\n",(0,s.jsx)(t.h2,{id:"communication-ports",children:"Communication ports"}),"\n",(0,s.jsx)(t.p,{children:"To communicate, the Node uses TCP and UDP (retransmission of lost data packets is only possible with TCP, for example, when we download a file from the internet through our browsers we expect a complete file, no bits should be missing, TCP ensures that the data is received correctly, data is not missing and is in order)."}),"\n",(0,s.jsx)(t.p,{children:"The ports should be available and free in the host for other services to operate via the communication ports. Make sure you don't have blockers, such as a Firewall, or forget to expose them in Docker, or on your custom setup. If that's the case open up your firewall, and if needed a port-forward, if docker doesn't do that for you."}),"\n",(0,s.jsxs)(t.p,{children:["To learn more, read the section ",(0,s.jsx)(t.a,{href:"/docs/node/requirements#ports",children:"ports"}),"."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsx)(t.p,{children:"Remember, the Node won't be able to respond if the ports are blocked. This might be quite difficult to troubleshoot, so make sure you have control over your system permissions to guarantee a successful node operation."})}),"\n",(0,s.jsx)(t.h2,{id:"quick-health-check",children:"Quick health check"}),"\n",(0,s.jsxs)(t.p,{children:["Run a quick health check by sending a GET request to ",(0,s.jsx)(t.code,{children:"/health"})," endpoint of RPC on ",(0,s.jsx)(t.a,{href:"/docs/node/requirements#ports",children:"port"})," 4230."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:'curl -w "\\n" localhost:4230/health\n'})}),"\n",(0,s.jsxs)(t.p,{children:["If successful, you should get the response ",(0,s.jsx)(t.code,{children:"running and staked"}),", as follows:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:"running and staked\n"})}),"\n",(0,s.jsx)(t.p,{children:"If you get an error, then it means that your node is not healthy."}),"\n",(0,s.jsx)(t.h2,{id:"json-rpc-health-check",children:"JSON-RPC Health check"}),"\n",(0,s.jsxs)(t.p,{children:["We'll send a request to the JSON RPC ",(0,s.jsx)(t.code,{children:"flk_ping"})," method. Execute the following command:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:'curl -X POST -H "Content-Type: application/json" -d \'{\n    "jsonrpc": "2.0",\n    "method": "flk_ping",\n    "params": [],\n    "id": 1\n  }\' localhost:4230/rpc/v0\n'})}),"\n",(0,s.jsxs)(t.p,{children:["If the request is successful, you should get the result ",(0,s.jsx)(t.code,{children:"pong"})," as follows:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-sh",children:'{\n  "jsonrpc": "2.0",\n  "result": "pong",\n  "id": 1\n}\n'})}),"\n",(0,s.jsx)(t.p,{children:"Any other response, such as errors determine that the node is not healthy."}),"\n",(0,s.jsx)(a.Z,{name:"Helder Oliveira",image:"https://github.com/heldrida.png",title:"Software Developer + DX",url:"https://github.com/heldrida"})]})}function u(e={}){const{wrapper:t}={...(0,o.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},3872:(e,t,n)=>{n.d(t,{Z:()=>o});n(7294);var s=n(5893);const o=e=>{let{image:t,name:n,title:o,url:a,communityMember:r=!1}=e;return(0,s.jsx)("section",{className:"author_card",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"avatar",children:(0,s.jsx)("a",{href:a,target:"_blank",alt:n,children:(0,s.jsx)("img",{src:t,alt:n})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"name",children:(0,s.jsx)("a",{href:a,target:"_blank",alt:n,children:n})}),(0,s.jsx)("span",{className:"title",children:o}),(0,s.jsxs)("span",{className:"discord",children:[r?"Join our community on":"Got questions? Find us on"," ",(0,s.jsx)("a",{href:"https://discord.gg/fleekxyz",target:"_blank",children:"discord!"})]})]})]})})}},1151:(e,t,n)=>{n.d(t,{Z:()=>i,a:()=>r});var s=n(7294);const o={},a=s.createContext(o);function r(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);