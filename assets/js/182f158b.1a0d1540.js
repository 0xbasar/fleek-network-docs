"use strict";(self.webpackChunkdocta=self.webpackChunkdocta||[]).push([[6949],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>k});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var s=n.createContext({}),c=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},p=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=c(r),h=a,k=u["".concat(s,".").concat(h)]||u[h]||d[h]||l;return r?n.createElement(k,o(o({ref:t},p),{},{components:r})):n.createElement(k,o({ref:t},p))}));function k(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:a,o[1]=i;for(var c=2;c<l;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}h.displayName="MDXCreateElement"},9246:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const l={template:"post",draft:!1,hide_title:!1,title:"How to secure a node with SSL/TSL",slug:"how-to-secure-a-node-with-ssl-tls",date:new Date("2023-01-03T02:00:00.000Z"),canonical:"",description:"Quick reference to secure a Node with SSL/TSL",category:"Reference",tags:["Reference","Git","Fleek Network","SSL","TSL","HTTPS","security"]},o=void 0,i={unversionedId:"Security/how-to-secure-a-node-with-ssl-tls",id:"Security/how-to-secure-a-node-with-ssl-tls",title:"How to secure a node with SSL/TSL",description:"Quick reference to secure a Node with SSL/TSL",source:"@site/reference/Security/how-to-secure-a-node-with-ssl-tls.md",sourceDirName:"Security",slug:"/Security/how-to-secure-a-node-with-ssl-tls",permalink:"/reference/Security/how-to-secure-a-node-with-ssl-tls",draft:!1,editUrl:"https://github.com/fleek-network/fleek-network-docs/edit/main/reference/Security/how-to-secure-a-node-with-ssl-tls.md",tags:[{label:"Reference",permalink:"/reference/tags/reference"},{label:"Git",permalink:"/reference/tags/git"},{label:"Fleek Network",permalink:"/reference/tags/fleek-network"},{label:"SSL",permalink:"/reference/tags/ssl"},{label:"TSL",permalink:"/reference/tags/tsl"},{label:"HTTPS",permalink:"/reference/tags/https"},{label:"security",permalink:"/reference/tags/security"}],version:"current",lastUpdatedAt:1682605828,formattedLastUpdatedAt:"Apr 27, 2023",frontMatter:{template:"post",draft:!1,hide_title:!1,title:"How to secure a node with SSL/TSL",slug:"how-to-secure-a-node-with-ssl-tls",date:"2023-01-03T02:00:00.000Z",canonical:"",description:"Quick reference to secure a Node with SSL/TSL",category:"Reference",tags:["Reference","Git","Fleek Network","SSL","TSL","HTTPS","security"]},sidebar:"defaultSidebar",previous:{title:"How to checkout a commit in project history",permalink:"/reference/Git/how-to-checkout-a-commit-in-project-history"},next:{title:"Securing the Ursa files",permalink:"/reference/Security/securing-the-ursa-files"}},s={},c=[],p={toc:c};function u(e){let{components:t,...r}=e;return(0,a.kt)("wrapper",(0,n.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Change the directory to the Ursa directory in your file system:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"cd <PATH-TO-URSA-CLI-PROJECT-SOURCE>\n")),(0,a.kt)("p",null,"Set up the DNS settings for a Node server:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Host"),(0,a.kt)("th",{parentName:"tr",align:null},"Answer"),(0,a.kt)("th",{parentName:"tr",align:null},"TTL"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"A"),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<YOUR-DOMAIN-NAME>")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"<SERVER-PUBLIC-IP-ADDRESS>")),(0,a.kt)("td",{parentName:"tr",align:null},"300")))),(0,a.kt)("p",null,"Here's an example:"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"Type"),(0,a.kt)("th",{parentName:"tr",align:null},"Host"),(0,a.kt)("th",{parentName:"tr",align:null},"Answer"),(0,a.kt)("th",{parentName:"tr",align:null},"TTL"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},"A"),(0,a.kt)("td",{parentName:"tr",align:null},"fleek-network-node.fleek.xyz"),(0,a.kt)("td",{parentName:"tr",align:null},"181.196.118.156"),(0,a.kt)("td",{parentName:"tr",align:null},"300")))),(0,a.kt)("p",null,"Verify the DNS records"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"dig fleek-network-node.fleek.xyz +nostats +nocomments +nocmd\n")),(0,a.kt)("p",null,"The result should contain a response with the ",(0,a.kt)("inlineCode",{parentName:"p"},"<SERVER-PUBLIC-IP-ADDRESS>")," set in the DNS record. Your domain should point to the machine address."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},";`<YOUR-DOMAIN-NAME>`.      IN  A\n`<YOUR-DOMAIN-NAME>`.       484 IN  A   `<SERVER-PUBLIC-IP-ADDRESS>` \n")),(0,a.kt)("p",null,"Run the Let's Encrypt script to generate the SSL/TLS certificates."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"curl https://get.fleek.network/lets_encrypt | bash\n")),(0,a.kt)("p",null,"\ud83d\udca1 This will only work you've followed the previous steps and confirmed that the DNS records are correct. Also, if multiple domains are provided, the certificates will be stored under the first one."),(0,a.kt)("p",null,"If successful, you should get a response that is similar to:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"Successfully received certificate.\nCertificate is saved at: /etc/letsencrypt/live/fleek-network-node.fleek.xyz/fullchain.pem\nKey is saved at:         /etc/letsencrypt/live/fleek-network-node.fleek.xyz/privkey.pem\nThis certificate expires on 2023-04-25.\nThese files will be updated when the certificate renews.\nNEXT STEPS:\n- The certificate will need to be renewed before it expires. Certbot can automatically renew the certificate in the background, but you may need to take steps to enable that functionality. See https://certbot.org/renewal-setup for instructions.\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\nIf you like Certbot, please consider supporting our work by:\n * Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate\n * Donating to EFF:                    https://eff.org/donate-le\n- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\n")),(0,a.kt)("p",null,"The process should create ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.ursa/proxy/config.toml")," with the required domain name customization."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'[[server]]\nproxy_pass = "127.0.0.1:4069"\nlisten_addr = "0.0.0.0:80"\nserve_dir_path = ".well-known"\n\n[[server]]\nproxy_pass = "127.0.0.1:4069"\nlisten_addr = "0.0.0.0:443"\n\n[server.tls]\ncert_path = "/etc/letsencrypt/live/<YOUR-DOMAIN-NAME>/fullchain.pem"\nkey_path = "/etc/letsencrypt/live/<YOUR-DOMAIN-NAME>/privkey.pem"\n\n[admin]\naddr = "0.0.0.0:8881"\n')),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"cert_path")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"key_path")," should have declared your custom domain name, e.g. for the domain name node.foobar.xyz would look like:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'# SSL code\ncert_path = "/etc/letsencrypt/live/node.foobar.xyz/fullchain.pem"\nkey_path = "/etc/letsencrypt/live/node.foobar.xyz/privkey.pem"\n')),(0,a.kt)("p",null,"Do a health check anywhere on the web to confirm"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"curl https://<YOUR DOMAIN NAME>/ping\n")),(0,a.kt)("p",null,"Should get the response back ",(0,a.kt)("inlineCode",{parentName:"p"},"pong")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"pong\n")),(0,a.kt)("p",null,"For longer detailed instructions, check our guide ","[Securing a Node with SSL/TSL]","(../../guides/Network nodes/fleek-network-securing-a-node-with-ssl-tls)."))}u.isMDXComponent=!0}}]);